<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ko≈°√≠k ‚Äî Mar≈•asDesign</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap" rel="stylesheet">
<style>
:root {
  --primary: #ff6363;
  --dark: #0d0d0d;
  --light: #fff;
  --gray: #1a1a1a;
}
body {
  background: radial-gradient(circle at 20% 20%, #1a1a1a, #0b0b0b);
  color: var(--light);
  font-family: 'Montserrat', sans-serif;
  overflow-x: hidden;
  padding: 2rem;
  min-height: 100vh;
  text-align: center;
}
h1 {
  color: var(--primary);
  font-weight: 800;
  letter-spacing: 1px;
  margin-bottom: 2rem;
  text-shadow: 0 0 20px rgba(255,99,99,0.4);
}

.cart-table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 2rem;
  border-radius: 10px;
  overflow: hidden;
}
.cart-table th, .cart-table td {
  padding: 1rem;
  text-align: center;
}
.cart-table th {
  background: rgba(255,255,255,0.05);
  color: var(--primary);
  font-weight: 600;
  text-transform: uppercase;
}
.cart-table td {
  background: rgba(255,255,255,0.03);
  border-bottom: 1px solid rgba(255,255,255,0.1);
}
.cart-table img {
  width: 90px;
  border-radius: 12px;
  box-shadow: 0 0 10px rgba(255,99,99,0.2);
}

.quantity {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 0.7rem;
}
.quantity button {
  background: var(--primary);
  border: none;
  color: white;
  width: 30px;
  height: 30px;
  border-radius: 50%;
  cursor: pointer;
  font-size: 1rem;
  transition: all 0.25s ease;
}
.quantity button:hover {
  transform: scale(1.2);
  box-shadow: 0 0 10px rgba(255,99,99,0.6);
}

.total {
  text-align: right;
  font-size: 1.2rem;
  margin-bottom: 1.5rem;
}
.total .old-price {
  text-decoration: line-through;
  opacity: 0.7;
  display: block;
}
.total .new-price {
  color: var(--primary);
  font-weight: 700;
  font-size: 1.4rem;
}

.discount-box {
  text-align: right;
  margin-bottom: 1.5rem;
}
.discount-box input {
  padding: 0.6rem 1rem;
  border-radius: 20px;
  border: none;
  outline: none;
  font-family: inherit;
  margin-right: 0.5rem;
}
.discount-box button {
  background: var(--primary);
  color: #fff;
  border: none;
  border-radius: 30px;
  padding: 0.6rem 1.4rem;
  cursor: pointer;
  transition: 0.3s;
}
.discount-box button:hover {
  transform: translateY(-3px);
  box-shadow: 0 5px 15px rgba(255,99,99,0.4);
}

button.main-btn {
  display: inline-block;
  background: var(--primary);
  color: #fff;
  padding: 0.9rem 1.8rem;
  border-radius: 40px;
  border: none;
  cursor: pointer;
  transition: 0.3s;
  font-size: 1.1rem;
  font-weight: 600;
  letter-spacing: 0.5px;
  margin-top: 1rem;
}
button.main-btn:hover {
  transform: translateY(-4px);
  box-shadow: 0 5px 15px rgba(255,99,99,0.4);
}

#form-container {
  display: none;
  background: var(--gray);
  padding: 1.8rem;
  border-radius: 15px;
  margin-top: 2rem;
  max-width: 500px;
  margin-left: auto;
  margin-right: auto;
}
#form-container form {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}
input, textarea {
  padding: 0.9rem;
  border-radius: 8px;
  border: none;
  background: #222;
  color: white;
}
input::placeholder, textarea::placeholder {
  color: #999;
}

#thankyou {
  display: none;
  text-align: center;
  margin-top: 3rem;
  font-size: 1.2rem;
  animation: fadeIn 0.6s ease-in-out;
}
#thankyou h2 {
  color: var(--primary);
  margin-bottom: 1rem;
}
#thankyou p {
  margin: 0.5rem 0;
}
#empty-cart {
  display: none;
}
@keyframes fadeIn {
  from {opacity: 0; transform: translateY(10px);}
  to {opacity: 1; transform: translateY(0);}
}
</style>
</head>
<body>

<h1>Tv≈Øj ko≈°√≠k</h1>

<div id="empty-cart">
  <p style="font-size:1.3rem; margin-bottom:1rem;">Ko≈°√≠k je pr√°zdn√Ω.</p>
  <a href="index.html"><button class="main-btn">Vybrat produkty</button></a>
</div>

<table class="cart-table" id="cart-table">
  <thead>
    <tr>
      <th>Foto</th>
      <th>Produkt</th>
      <th>Cena</th>
      <th>Mno≈æstv√≠</th>
      <th>Celkem</th>
      <th>Odebrat</th>
    </tr>
  </thead>
  <tbody id="cart-body"></tbody>
</table>

<div class="discount-box" id="discount-box">
  <input type="text" id="discount-code" placeholder="Zadej slevov√Ω k√≥d">
  <button onclick="applyDiscount()">Pou≈æ√≠t</button>
</div>

<div class="total" id="total">Celkem: 0 Kƒç</div>

<button class="main-btn" id="show-form-btn">Dokonƒçit objedn√°vku</button>

<div id="form-container">
  <h2>Odeslat objedn√°vku</h2>
  <form id="order-form">
    <input type="text" placeholder="E-mail nebo kontakt" required>
    <textarea placeholder="Pozn√°mka k objedn√°vce (nepovinn√©)"></textarea>
    <button type="submit" class="main-btn">Odeslat objedn√°vku</button>
  </form>
</div>

<div id="thankyou">
  <h2>üéâ Dƒõkujeme za Va≈°i objedn√°vku!</h2>
  <p>Na dal≈°√≠ n√°kup m√°te 10 % slevu s k√≥dem:</p>
  <p style="font-weight:700; color:var(--primary); font-size:1.3rem;">MARTASDESIGN10</p>
</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<script>
// --- DEMO PRODUKTY ---
let cart = JSON.parse(localStorage.getItem("cart")) || [];
let discountActive = false;

function saveCart() {
  localStorage.setItem("cart", JSON.stringify(cart));
}

function updateCart() {
  const tbody = document.getElementById("cart-body");
  const table = document.getElementById("cart-table");
  const empty = document.getElementById("empty-cart");
  const discountBox = document.getElementById("discount-box");
  const totalDiv = document.getElementById("total");
  const formBtn = document.getElementById("show-form-btn");

  if(cart.length === 0){
    table.style.display = "none";
    discountBox.style.display = "none";
    totalDiv.style.display = "none";
    formBtn.style.display = "none";
    empty.style.display = "block";
    return;
  } else {
    table.style.display = "table";
    discountBox.style.display = "block";
    totalDiv.style.display = "block";
    formBtn.style.display = "inline-block";
    empty.style.display = "none";
  }

  tbody.innerHTML = "";
  let total = 0;

  cart.forEach((item,index)=>{
    const price = parseFloat(item.price) || 0;
    const qty = parseInt(item.qty) || 0;
    const subtotal = price * qty;
    total += subtotal;

    const row = document.createElement("tr");
    row.innerHTML = `
      <td><img src="${item.img}" alt="${item.name}"></td>
      <td>${item.name}</td>
      <td>${price} Kƒç</td>
      <td class="quantity">
        <button onclick="changeQty(${index},-1)">‚àí</button>
        ${qty}
        <button onclick="changeQty(${index},1)">+</button>
      </td>
      <td>${subtotal} Kƒç</td>
      <td><button onclick="removeItem(${index})">üóëÔ∏è</button></td>
    `;
    tbody.appendChild(row);
  });

  let totalText = `Celkem: ${total} Kƒç`;
  if(discountActive){
    const discounted = Math.round(total*0.9);
    totalText = `<span class="old-price">Celkem: ${total} Kƒç</span>
                 <span class="new-price">Po slevƒõ: ${discounted} Kƒç</span>`;
  }

  totalDiv.innerHTML = totalText;
  saveCart();
}

function changeQty(index,delta){
  cart[index].qty = parseInt(cart[index].qty) + delta;
  if(cart[index].qty <= 0) cart.splice(index,1);
  updateCart();
}

function removeItem(index){
  cart.splice(index,1);
  updateCart();
}

function applyDiscount(){
  const code = document.getElementById("discount-code").value.trim().toUpperCase();
  if(code==="MARTASDESIGN10"){
    discountActive = true;
    updateCart();
    alert("‚úÖ Sleva 10 % byla √∫spƒõ≈°nƒõ uplatnƒõna!");
  } else {
    discountActive = false;
    updateCart();
    alert("‚ùå Neplatn√Ω slevov√Ω k√≥d.");
  }
}

document.getElementById("show-form-btn").addEventListener("click",()=>{
  const form=document.getElementById("form-container");
  form.style.display=form.style.display==="block"?"none":"block";
});

document.getElementById("order-form").addEventListener("submit",(e)=>{
  e.preventDefault();
  localStorage.removeItem("cart");
  cart=[];
  discountActive=false;
  updateCart();
  document.getElementById("form-container").style.display="none";
  document.getElementById("thankyou").style.display="block";

  const duration = 2*1000;
  const end = Date.now()+duration;
  (function frame(){
    confetti({particleCount:4,startVelocity:30,spread:360,ticks:60,origin:{x:Math.random(),y:Math.random()-0.2}});
    if(Date.now()<end) requestAnimationFrame(frame);
  })();
});

updateCart();
</script>

</body>
</html>
